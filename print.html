<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Coin Voting</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./mdbook-admonish.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="usage/index.html"><strong aria-hidden="true">1.</strong> Usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/mindmap.html"><strong aria-hidden="true">1.1.</strong> Mindmap</a></li><li class="chapter-item expanded "><a href="usage/example.html"><strong aria-hidden="true">1.2.</strong> Example</a></li></ol></li><li class="chapter-item expanded "><a href="election/index.html"><strong aria-hidden="true">2.</strong> Election</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="election/id.html"><strong aria-hidden="true">2.1.</strong> Identifier</a></li><li class="chapter-item expanded "><a href="election/questions.html"><strong aria-hidden="true">2.2.</strong> Questions</a></li><li class="chapter-item expanded "><a href="election/reg_window.html"><strong aria-hidden="true">2.3.</strong> Registration Window</a></li><li class="chapter-item expanded "><a href="election/elec_window.html"><strong aria-hidden="true">2.4.</strong> Election Window</a></li><li class="chapter-item expanded "><a href="election/misc.html"><strong aria-hidden="true">2.5.</strong> Misc</a></li></ol></li><li class="chapter-item expanded "><a href="design/index.html"><strong aria-hidden="true">3.</strong> Design</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design/notes.html"><strong aria-hidden="true">3.1.</strong> Data Diagram</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Coin Voting</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="coin-voting-v2"><a class="header" href="#coin-voting-v2">Coin Voting v2</a></h1>
<blockquote>
<p>Vote anonymously using your shielded ZEC,
where your stake equals your voting power.</p>
</blockquote>
<h2 id="opportunities"><a class="header" href="#opportunities">Opportunities</a></h2>
<ul>
<li>Governance</li>
<li>Proof of Balance</li>
<li>Polls</li>
<li>Airdrops</li>
</ul>
<h2 id="high-level-description"><a class="header" href="#high-level-description">High Level Description</a></h2>
<p>I organized a few coin-weighted votes last summer about the devfund.</p>
<p>https://forum.zcashcommunity.com/t/the-last-minute-shielded-petition/48244
https://forum.zcashcommunity.com/t/coin-weighted-poll/47964</p>
<ol>
<li>The pollster, in this case, me, would like to have the opinion of
the community of Zcash holders.</li>
<li>He defines an eligibility window of blocks. Only Orchard notes
created during these blocks can be used for voting.</li>
<li>At the end of the window, zcash holders can "cast" their
votes using the ZEC they have.</li>
<li>They can vote using their wallet app (Ywallet at the moment)</li>
</ol>
<p>::: tip
Voting is <strong>secure</strong> and <strong>private</strong>. All the source code will
be published under the MIT license.
:::</p>
<p>This was Coin Voting v1.</p>
<p>Learning from these experiments, I am proposing an improved version.</p>
<h2 id="coin-voting-v2-1"><a class="header" href="#coin-voting-v2-1">Coin Voting V2</a></h2>
<ol>
<li>The eligibility window <em>may</em> be extended to cover all of the Orchard notes
at the expense of requiring more compute and bandwidth</li>
<li>Splitting notes is not necessary. Voters can cast multiple
ballots (for different options)</li>
<li>Voters can <em>delegate</em> their voting power to other people</li>
<li>Some voters can be <em>granted</em> voting power not associated with ZEC</li>
<li>The pollster can prove in ZK that the tally of the votes
is correct</li>
</ol>
<p>::: info</p>
<ul>
<li>Delegation</li>
<li>Multi ballots</li>
<li>Grants</li>
</ul>
<p>are new features that introduce a new circuit code
:::</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mindmap"><a class="header" href="#mindmap">Mindmap</a></h1>
<pre><code class="language-mermaid">mindmap
    root((Coin Voting))
        Election Board
            Public Parameters
                Question
                Choices
            Technical Parameters
                Election ID
                Window Start
                Snapshot Height
                Note Filter
        Election Node
            Reference Data
                Note Commitment Tree
                Nullifier Exclusion Tree
            Updates
        Voters
            Grantees
            Zcash Holdings
        Blockchain
            Pre-Snapshot
            Fork
                Ballots
                Grants
                Delegations
            Termination
                Tally
                Proof
</code></pre>
<p>Here's a short description on the role of each major component.</p>
<h2 id="election-board"><a class="header" href="#election-board">Election Board</a></h2>
<p>The election board is the governing body responsible for overseeing the administration of
the elections. Normally, its main duties include:</p>
<ul>
<li>Managing Voter Registration: Ensuring that only eligible ZEC holders can participate.
This is done through cryptography instead.</li>
<li>Administering Elections: Organizing and managing the logistics of the process. Running
the Election Nodes and the information website if any.</li>
<li>Counting Votes: Using the software and publishing the results</li>
<li>Certifying Election Results: Providing the cryptographic proofs and the means to verify
them</li>
</ul>
<h2 id="voters"><a class="header" href="#voters">Voters</a></h2>
<ul>
<li>Any Zcash holder can vote with a voting power equal to their holdings.</li>
<li>Only coins in the <em>Orchard</em> pool at the time of the snapshot
are usable.</li>
<li>Voters cast their votes using an app or their wallet (if it integrates
the voting library)</li>
<li>Individuals may receive additional voting power from the Election Board.</li>
<li>Voting Power can be delegated, i.e. sent to another user.</li>
</ul>
<p>::: info
Voting Power has no monetary value and can be only used in a particular
election
:::</p>
<p>::: warning
At this time, there is no mechanism to <em>restrict</em> voting to a particular
group of users. It may be considered if there is an interest for a model of
indirect elections with super representatives.
:::</p>
<h2 id="blockchain"><a class="header" href="#blockchain">Blockchain</a></h2>
<p>Most of the data comes from the blockchain. Conceptually, the coin voting
considers transaction <em>outputs</em> from Orchard as source of voting power (VP),
transaction <em>inputs</em> as a destruction of voting power.</p>
<p>Then at the snapshot height, the blockchain forks and a different "timeline" forms.
On this branch, participants trade VP (delegations) and eventually spend it
on proposals.</p>
<p>The fork is managed by the Election Board via the Election Node app.</p>
<h2 id="election-nodes"><a class="header" href="#election-nodes">Election Nodes</a></h2>
<p>The Election Node implements the Voting Protocol. It has similar responsibilities
to the Zcash full node but without mining, p2p and block schedule.</p>
<p>Via the Election Nodes,</p>
<ul>
<li>Voters receive delegated VP</li>
<li>Voters submit their ballots</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="election-board--pollster"><a class="header" href="#election-board--pollster">Election Board / Pollster</a></h1>
<p>On July 2024,
The community wanted to poll the Zcash Holders regarding
the future of the DevFund past Nov 24.</p>
<blockquote>
<p>"What of the following proposals do you support?"</p>
</blockquote>
<p>The options were:</p>
<ul>
<li>"None of these options",</li>
<li>"Manufacturing Consent; Re-Establishing a Dev Fund for ECC, ZF, ZCG, Qedit, FPF, and ZecHub (by NoamChom)",</li>
<li>"Establishing a Hybrid Dev Fund for ZF, ZCG and a Dev Fund Reserve (by Jack Gavigan)",</li>
<li>"Lockbox For Decentralized Grants Allocation (perpetual 50% option) (by Skylar Saveland)",</li>
<li>"Hybrid Deferred Dev Fund: Transitioning to a Non-Direct Funding Model (by Jason McGee, Peacemonger, GGuy)",</li>
<li>"Lockbox For Decentralized Grants Allocation (20% option) (by Kris Nuttycombe)",</li>
<li>"Masters Of The Universe? (by NoamChom)",</li>
<li>"End the Dev Fund and return 100% of block rewards to miners"</li>
</ul>
<p>From YWallet, users could use their funds to vote for their favorite proposal.</p>
<p><a href="https://youtu.be/c-aFzW6kWNk">Voting in YWallet</a></p>
<p>The results were
<a href="https://forum.zcashcommunity.com/t/coin-weighted-poll/47964/160">published on the forums</a>.</p>
<h2 id="what-did-we-do-to-make-it-happen"><a class="header" href="#what-did-we-do-to-make-it-happen">What did we do to make it happen?</a></h2>
<p>All the parameters that define the election/vote are stored in a
JSON file.</p>
<p>For instance, the previous vote had these settings:</p>
<pre><code class="language-json">{
    "id": 2,
    "name": "Devfund Poll Proposals 2",
    "start_height": 2540000,
    "end_height": 2574200,
    "close_height": 2576000,
    "submit_url": "/submit/2",
    "question": "What proposal do you support?",
    "candidates": [
        "None of these options",
        "Manufacturing Consent; Re-Establishing a Dev Fund for ECC, ZF, ZCG, Qedit, FPF, and ZecHub (by NoamChom)",
        "Establishing a Hybrid Dev Fund for ZF, ZCG and a Dev Fund Reserve (by Jack Gavigan)",
        "Lockbox For Decentralized Grants Allocation (perpetual 50% option) (by Skylar Saveland)",
        "Hybrid Deferred Dev Fund: Transitioning to a Non-Direct Funding Model (by Jason McGee, Peacemonger, GGuy)",
        "Lockbox For Decentralized Grants Allocation (20% option) (by Kris Nuttycombe)",
        "Masters Of The Universe? (by NoamChom)",
        "End the Dev Fund and return 100% of block rewards to miners"
    ],
    "cmx": "233ea22fc2067c7141bb418f6cb71c308933eac205c3d79879c1c6acbed0a357",
    "nf": "03517198be86743e34ee057d5f41dc97b0a68da7d58eab0fee072af00288d472",
    "status": "Opened"
}
</code></pre>
<p>It was made manually but Coin Voting V2 will have a tool to assist
in its creation.</p>
<p>Let's look at its content.</p>
<div style="break-before: page; page-break-before: always;"></div><p>This section discusses the definition of an election
from the perspective of the participants.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="name"><a class="header" href="#name">Name</a></h1>
<p>The <em>name</em> of the election is displayed on the voting UI and must uniquely
identify the election. It gets hashed and serves as a way to distinguish between
ballots.</p>
<pre><code class="language-admonish info">Ballots that use the same note cannot be linked
because of the unique election ID
</code></pre>
<p>It is important to make sure that another election does not use
the same name.</p>
<pre><code class="language-admonish tip">Pick a name that represents the election with no ambiguity. Remember that any change in the name will invalidate all the ballots and force voters to resubmit new ones.
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<ul>
<li>Good choices: "Devfund 2024 - ZCG - Jul 2024"</li>
<li>Bad choices:
<ul>
<li>"Devfund 2024", no mention of the organizer</li>
<li>"Devfund 2024 - ZCG" - there was going to be more than one vote</li>
</ul>
</li>
<li>Questionable choice:
<ul>
<li>"Devfund 2024 - ZCG - 2671000" - implies that the snapshot height is set (could be intentional)</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="question--answers"><a class="header" href="#question--answers">Question &amp; Answers</a></h1>
<pre><code class="language-admonish info">`question` and `candidates` are the question asked and the possible answers.
Voting does not support free-form answers. The voters must choose
amongst one of the given options.
</code></pre>
<p>However, there is no limit on the number of options.</p>
<p>Next, let's discuss the blockchain heights.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="blockchain-windows"><a class="header" href="#blockchain-windows">Blockchain Windows</a></h1>
<pre><code class="language-json">{
    "start_height": 2540000,
    "end_height": 2574200,
    "close_height": 2576000,
}    
</code></pre>
<h2 id="registration-window"><a class="header" href="#registration-window">Registration Window</a></h2>
<pre><code class="language-admonish info">The registration window is between the **Start Height** and the **End Height**.
Only the Orchard notes **created** during the registration window are eligible.
</code></pre>
<p>If the end of the interval is in the future, the election definition must be
updated after the blockchain reaches that height.</p>
<p>However, the longer the range, the more notes need to be downloaded and
processed.</p>
<blockquote>
<p>Refer to the technical section for more information on the calculations
required.</p>
</blockquote>
<p>The election does not necessarily have to include every output from the
blockchain; it may choose to skip some based on publicly agreeable criteria. For
example, notes that are part of transactions with more than 20 outputs could be
omitted to avoid the spam. However, skipping notes based on shielded data is not
possible.</p>
<h2 id="election-window"><a class="header" href="#election-window">Election Window</a></h2>
<pre><code class="language-admonish info">The Election window is between the **End Height** and the **Close Height**.
Users must **vote** during this period.

</code></pre>
<p>The close height is when the election stops accepting ballots. The client software should not send votes after this height. The check is enforced on the server side. If a faulty client sends votes past the close height, the election server rejects them.</p>
<blockquote>
<p>This interval is covered in more details in the next section.</p>
</blockquote>
<h2 id="status"><a class="header" href="#status">Status</a></h2>
<p>The status is one of the following.</p>
<ul>
<li>Registration: the current height is in the election window. Voters should move
their funds and leave them unspent until the window closes. They cannot vote yet
because the window has not ended.</li>
<li>Opened: Voters can vote.</li>
<li>Closed: Ballots are not accepted anymore.</li>
</ul>
<p>This is a recommendation for the client app. The server
decides whether to accept or reject,
based on the ballot content and the time it received
it.</p>
<h2 id="note"><a class="header" href="#note">Note</a></h2>
<p>Heights are not included in the calculation of the election hash and therefore
<em>may</em> be adjusted after the election starts.</p>
<p>However, the election board should clearly announce any change as it may affect
the results.</p>
<p>If the election board wants to commit to a given window they should explicitly
include it in the name of the election.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="election-window-1"><a class="header" href="#election-window-1">Election Window</a></h2>
<p>The election data forks from the main blockchain at the snapshot height.
Notes from the registration window make the baseline of the voting power, but then voters can delegate their votes to others.
<strong>Delegation</strong> works by submitting a "vote" to another user.</p>
<p><strong>Grants</strong> are equivalent to premining.</p>
<p>Logically speaking, voters acquired voting power during the registration window. In the election window, they use their voting power by sending it to another user or voting for a candidate or a motion.</p>
<p>The system leverages Orchard receivers. The candidates have "addresses" in the JSON file.</p>
<h2 id="direct-election"><a class="header" href="#direct-election">Direct Election</a></h2>
<p>Votes sent to these addresses are final. At the end, the election
board tallies the votes and the winner is decided.</p>
<h2 id="indirect-election"><a class="header" href="#indirect-election">Indirect Election</a></h2>
<p>However, an election scheme could be "indirect" or in stages, where these candidates proceed to vote further using the votes they received in a previous stage.</p>
<pre><code class="language-mermaid">flowchart LR
    ZHolders --&gt; Candidates
    Candidates --&gt; Winner
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="misc-other-data"><a class="header" href="#misc-other-data">Misc Other Data</a></h1>
<p>The <code>id</code> differentiates between several concurrent elections that the server is
hosting. It does not have to be globally unique since it is specific to a given
server deployment.</p>
<p>The <code>submit URL</code> is where the client sends the ballots. It is a relative URI to
the server URL that hosts the election definition file.</p>
<p>So far, we have not discussed Coin Voting from any technical perspective.
The next chapter's topic deals with the design and implementation.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design"><a class="header" href="#design">Design</a></h1>
<p>Coin Voting is essentially the same as a token system, i.e., the same as Zcash
itself, with some adjustments. Instead of coins, we have tokens that represent
the voting power. We want to distribute the voting power based on a verified
amount of ZEC.</p>
<p>In principle, we are airdropping voting power.</p>
<p>Transactions are
exchanges of voting power between participants. Essentially, we allow electors
to delegate their vote. The election's winner is the candidate or the choice
with the most votes at the end.</p>
<p>The Coin Voting leverages the Orchard system and uses its transaction system to support delegation.</p>
<p>It extends it with the ability to include existing notes from the Orchard pool. Coinbase transactions add grants that reward critical organizations and influential individuals.</p>
<p>Otherwise, Voting Power is a self-contained system: There is no minting or
burning.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-diagrams"><a class="header" href="#data-diagrams">Data Diagrams</a></h1>
<h2 id="vote-blockchain"><a class="header" href="#vote-blockchain">Vote "Blockchain"</a></h2>
<pre><code class="language-admonish info">The Vote "Blockchain" is a public ledger of the data
needed to organize a secure and trustless election.
</code></pre>
<p>This is not a typical blockchain in the sense that
no mining takes place. The Election Board maintains
the blockchain. It is <em>not</em> decentralized.</p>
<p>It goes through the following states.</p>
<pre><code class="language-mermaid">stateDiagram-v2
    a : Genesis
    b : Premine
    c : Orchard Notes
    c2 : Snapshot
    d : Votes (+Delegations)
    e : Results

    a --&gt; b : Add Grants
    b --&gt; c : Add from Registration Window
    c --&gt; c2 : Fork
    c2 --&gt; d : Add Voting Transactions
    d --&gt; e : Show Balance
</code></pre>
<h2 id="block-structure"><a class="header" href="#block-structure">Block Structure</a></h2>
<h3 id="block-header"><a class="header" href="#block-header">Block Header</a></h3>
<ul>
<li>prev hash</li>
<li>election hash</li>
<li>merkle root of commitment tree</li>
<li>merkle root of nullifier tree</li>
<li>signature</li>
</ul>
<h3 id="transactions"><a class="header" href="#transactions">Transactions</a></h3>
<ul>
<li>orchard transactions
<ul>
<li>election nullifier</li>
<li>note commitment</li>
<li>value commitment</li>
<li>randomization factor</li>
<li>encrypted note + ephemeral key</li>
<li>zkp</li>
</ul>
</li>
</ul>
<h2 id="genesis"><a class="header" href="#genesis">Genesis</a></h2>
<p>The Genesis block is the block #0.
It contains the grants and its previous hash is the <code>election_hash</code>.</p>
<h2 id="grants"><a class="header" href="#grants">Grants</a></h2>
<h2 id="zec-to-voting-power"><a class="header" href="#zec-to-voting-power">ZEC to Voting Power</a></h2>
<h2 id="delegations"><a class="header" href="#delegations">Delegations</a></h2>
<h2 id="votes"><a class="header" href="#votes">Votes</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
